<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content=""/>
  <meta name="author" content="Dashboard"/>
  <meta name="keyword" content="Dashboard, Bootstrap, Admin, Template, Theme, Responsive, Fluid, Retina"/>
  <title>喵喵财保后台系统</title>

  <!-- Favicons -->
  <link href="back/img/favicon.png" rel="icon"/>
  <link href="back/img/apple-touch-icon.png" rel="apple-touch-icon"/>

  <!-- Bootstrap core CSS -->
  <link href="back/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet"/>
  <!--external css-->
  <link href="back/lib/font-awesome/css/font-awesome.css" rel="stylesheet" />
  <link rel="stylesheet" type="text/css" href="back/css/zabuto_calendar.css"/>
  <link rel="stylesheet" type="text/css" href="back/lib/gritter/css/jquery.gritter.css" />
  <!-- Custom styles for this template -->
  <link href="back/css/style.css" rel="stylesheet"/>
  <link href="back/css/style-responsive.css" rel="stylesheet"/>
  <script src="back/lib/chart-master/Chart.js"></script>
  <script src="back/lib/jquery/jquery.min.js"></script>

  <script src="back/lib/bootstrap/js/bootstrap.min.js"></script>
  <script class="include" type="text/javascript" src="back/lib/jquery.dcjqaccordion.2.7.js"></script>
  <script src="back/lib/jquery.scrollTo.min.js"></script>
  <script src="back/lib/jquery.nicescroll.js" type="text/javascript"></script>
  <script src="back/lib/jquery.sparkline.js"></script>
  <!--common script for all pages-->
  <script src="back/lib/common-scripts.js"></script>
  <script type="text/javascript" src="back/lib/gritter/js/jquery.gritter.js"></script>
  <script type="text/javascript" src="back/lib/gritter-conf.js"></script>
  <!--script for this page-->
  <script src="back/lib/sparkline-chart.js"></script>
  <script src="back/lib/zabuto_calendar.js"></script>
  <script src="back/lib/jquery-ui-1.9.2.custom.min.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-fileupload/bootstrap-fileupload.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-datepicker/js/bootstrap-datepicker.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-daterangepicker/date.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-daterangepicker/daterangepicker.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-datetimepicker/js/bootstrap-datetimepicker.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-daterangepicker/moment.min.js"></script>
  <script type="text/javascript" src="back/lib/bootstrap-timepicker/js/bootstrap-timepicker.js"></script>
  <script src="back/lib/advanced-form-components.js"></script>
  
  <script type="text/javascript">
	  function goToPage(num){
			var total = $("#totalpage").val();
			
			if(parseInt(num)<1){
				alert("已经是第一页了!");
			}else if(parseInt(num)>total){
				alert("已经是最后一页了!");
			}else{
				sform.cp.value=num;
				sform.submit();
		}
	  }
	  function jumpDetails(pid){
		  location.href = "/jumpDetails?pid="+pid+"&flag=true";
  		}
	  
  </script>
  <script type="text/javascript">
  $(function(){
	  	
  		console.log($("#totalpage").val());
  		console.log($("#cp").val());
		$.post("/weather",{"city":"深圳","appkey":"3aa9dfcfc136e1953edb18c45d1835f6"},function(data){
			console.log(data);
			$("#tianqi_city").html(data.result.result.city);
			$("#tianqi_date").html(data.result.result.updatetime);
			$("#tianqi_week").html(data.result.result.week);
			$("#tianqi_weather").html(data.result.result.weather);
			$("#tianqi_humidity").html(data.result.result.humidity);
			$("#tianqi_temp").html(data.result.result.temp);
			$("#tianqi_templow").html(data.result.result.templow);
			$("#tianqi_temphigh").html(data.result.result.temphigh);
			$("#tianqi_detail").html(data.result.result.index[0].detail);
		},"json");
		
		
		
		 /* $("#splitPage li").click(function(){
				var total = $("#totalpage").val();
				console.log(num);
				if(parseInt(num)<1){
					alert("已经是第一页了!");
				}else if(parseInt(num)>total){
					alert("已经是最后一页了!")
				}else{
					sform.cp.value=num;
					sform.submit();}		
			}
		)  */
	});
  
   
  </script>
  <script type="application/javascript">
      $(document).ready(function() {
      $("#date-popover").popover({
        html: true,
        trigger: "manual"
      });
      $("#date-popover").hide();
      $("#date-popover").click(function(e) {
        $(this).hide();
      });

      $("#my-calendar").zabuto_calendar({
        action: function() {
          return myDateFunction(this.id, false);
        },
        action_nav: function() {
          return myNavFunction(this.id);
        },
        ajax: {
          url: "show_data.php?action=1",
          modal: true
        },
        legend: [{
            type: "text",
            label: "Special event",
            badge: "00"
          },
          {
            type: "block",
            label: "Regular event",
          }
        ]
      });
    }); 

     function myNavFunction(id) {
      $("#date-popover").hide();
      var nav = $("#" + id).data("navigation");
      var to = $("#" + id).data("to");
      console.log('nav ' + nav + ' to: ' + to.month + '/' + to.year);
      
     
    } 
  </script>

</head>

<body>
  <section id="container">
    <!-- **********************************************************************************************************************************************************
        TOP BAR CONTENT & NOTIFICATIONS
        *********************************************************************************************************************************************************** -->
    <!--header start-->
    
    <div th:replace="server/commons/comm::#topbar(activeUri='insurance_slip_list.html')"></div>
    
    <!--header end-->
    <!-- **********************************************************************************************************************************************************
        MAIN SIDEBAR MENU
        *********************************************************************************************************************************************************** -->
    <!--sidebar start-->
    
    <div th:replace="server/commons/comm::#sidebar(activeUri='insurance_slip_list.html')"></div>
    
    <!--sidebar end-->
    <!-- **********************************************************************************************************************************************************
        MAIN CONTENT
        *********************************************************************************************************************************************************** -->
    <!--main content start-->
    <section id="main-content">
     <section class="wrapper">
        <div class="row">
       
		<div class="col-md-12">
            <div class="content-panel">
              <form action="/processing" method="post" id="sform" name="sform">
              <input type="hidden"  name="cp"  id="cp" th:value="${cp}"/>
              <input type="hidden"  name="ps"  id="ps" th:value="${ps}"/>
				<input type="hidden" name="totalpage"  id="totalpage" th:value="${totalpage}" />
              <table class="table table-striped table-advance table-hover">
                <div class="alert alert-success" role="alert">
				  <h4 class="alert-heading">投保单列表</h4>
				</div>
                <thead>
                
				  <div class="form-row">
				    <div class="form-group col-md-4">
				      <label for="inputCity">保单号</label>
				      <input type="text" class="form-control" th:value="${v_id}" id="inputCity" name="v_id">
				    </div>
				    <div class="form-group col-md-2">
				      <label for="inputZip">被保人姓名</label>
				      <input type="text" class="form-control" th:value="${v_name}" id="inputZip" name="v_name">
				    </div>
				    <div class="form-group col-md-2">
				      <label for="inputZip">保费(低)</label>
				      <input type="text" class="form-control" th:value="${v_lopremium}" id="inputZip" name="v_lopremium">
				    </div>
				    <div class="form-group col-md-2">
				      <label for="inputZip">保费(高)</label>
				      <input type="text" class="form-control" th:value="${v_hipremium}" id="inputZip" name="v_hipremium">
				    </div>
				    
				    <div class="form-group col-md-2">
				      <label for="inputState">区域</label>
				      <select id="inputState" class="form-control" name="v_area">
				      	<option value="">--请选择--</option>
				        <option th:each="city:${cityList}" th:value="${city.code}" th:selected="${city.code}==${v_area}" th:text="${city.region_name_c}">Choose...</option>
				      </select>
				    </div>
				  </div>
				  <div class="form-row">
				    <div class="form-group col-md-2">
				      <label for="inputState">申请时间(低)</label>
				      <input type="text" th:value="${v_lojoindate}" class="form-control form-control-inline input-medium default-date-picker" name="v_lojoindate">
				     
				    </div>
				    <div class="form-group col-md-2">
				      <label for="inputState">申请时间(高)</label>
				      <input type="text" th:value="${v_hijoindate}" class="form-control form-control-inline input-medium default-date-picker" name="v_hijoindate">
				    </div>
				   <div class="form-group col-md-2">
				      <label for="inputState">财险险种</label>
				      <select id="inputState" class="form-control" name="v_coverageid" >
				        <option value="">--请选择--</option>
				        <option th:each="coverage:${coverageList}" th:selected="${coverage.coverageid}==${v_coverageid}" th:value="${coverage.coverageid}" th:text="${coverage.coverage_name}">Choose...</option>
				      </select>
				    </div>
				    <div class="form-group col-md-2">
				      <label for="inputZip">保单状态</label>
				      <select id="inputState" class="form-control" name="v_status">
				      	<option value="">--请选择--</option>
				        <option th:value="0" th:selected="${v_status}=='0'">保单待修改</option>
				        <option th:value="1" th:selected="${v_status}=='1'">保单待初审</option>
				        <option th:value="2" th:selected="${v_status}=='2'">保单待勘查</option>
				        <option th:value="3" th:selected="${v_status}=='3'">保单勘查中</option>
				        <option th:value="4" th:selected="${v_status}=='4'">保单勘查结束</option>
				        <option th:value="5" th:selected="${v_status}=='5'">保单初审通过</option>
				        <option th:value="6" th:selected="${v_status}=='6'">保单初审不通过</option>
				        <option th:value="7" th:selected="${v_status}=='7'">保单待复审</option>
				        <option th:value="8" th:selected="${v_status}=='8'">保单复审中</option>
				        <option th:value="9" th:selected="${v_status}=='9'">保单复审通过</option>
				        <option th:value="10" th:selected="${v_status}=='10'">保单复审不通过</option>
				        <option th:value="11" th:selected="${v_status}=='11'">保单待终审</option>
				        <option th:value="12" th:selected="${v_status}=='12'">保单终审中</option>
				        <option th:value="13" th:selected="${v_status}=='13'">保单终审通过</option>
				        <option th:value="14" th:selected="${v_status}=='14'">保单终审不通过</option>
				      </select>
				    </div>
				  </div>
				  <div class="form-row">
				  	<div class="form-group col-md-2">
				      <label for="inputState">保单性质</label>
				      <select id="inputState" class="form-control" name="v_property" >
				      	<option value="">--请选择保单性质--</option>
				        <option value="0" th:selected="${v_property}=='0'">个人</option>
				        <option value="1" th:selected="${v_property}=='1'">企业</option>
				      </select>
				    </div>
				    
				    <div class="form-group col-md-2">
				      <label for="inputState">排序</label>
				      <select id="inputState" class="form-control" name="v_order" >
				      	<option value="">--选择排序方式--</option>
				        <option value="desc" th:selected="${v_order}=='desc'">时间正序</option>
				        <option value="asc" th:selected="${v_order}=='asc'">时间倒序</option>
				      </select>
				    </div>
				  </div>
				  
				  <button type="submit" class="btn btn-primary" style="margin-left: 45%">查询</button>
				
			    
			    <hr/>
                  <tr>
                    <th><i class="fa fa-bullhorn"></i></th>
                    <th class="hidden-phone"></i>保单号</th>
                    <th>险种</th>
                    <th>投保人姓名</th>
                    <th>初审状态</th>
                    <th>复审状态</th>
                    <th>终审状态</th>
                    <th>投保时间</th>
                    <th>区域</th>
                    <th>保费</th>
                    <th>操作人</th>
                    <th><i class=" fa fa-question-circle"></i>紧急状态</th>
                    <th><i class=" fa fa-edit">操作</i></th>
                  </tr>
                </thead>
                <tbody>
                
                  
                  <tr  th:each="alist,indexlist:${insureList}" >
                    <td th:text="${indexlist.index+1}"><i class="fa fa-bullhorn"></i>#</td>
                    <td th:text="${alist.policyid}" class="hidden-phone"><i class="fa fa-bookmark"></i>保单号</td>
                    <td th:text="${alist.coverage.coverage_name}"><i class="fa fa-bookmark"></i> 险种</td>
                    <td th:text="${alist.insure_name}"><i class=" fa fa-bookmark"></i>投保人姓名</td>
                    <td th:text="${alist.status.statusid}<=5?${alist.status.status_name}:'初审已通过'" ><i class=" fa fa-bookmark"></i>初审状态</td>
                    <td th:text="${alist.status.statusid}>5 and ${alist.status.statusid}<=10?${alist.status.status_name}:(${alist.status.statusid}>10?'复审已通过':'未复审')" ><i class=" fa fa-bookmark"></i>复审状态</td>
                    <td th:text="${alist.status.statusid}>10 and ${alist.status.statusid}<=14?${alist.status.status_name}:(${alist.status.statusid}>14?'复审已通过':'未终审')"><i class=" fa fa-bookmark"></i>终审状态</td>
                    <td th:text="${alist.insure_date}"><i class=" fa fa-bookmark"></i>投保时间</td>
                    <td th:text="${alist.city.region_name_c}"><i class=" fa fa-bookmark"></i>区域</td>
                    <td th:text="${alist.premium}"><i class=" fa fa-bookmark"></i>保费</td>
                    <td th:text="${alist.insure_name}"><i class=" fa fa-bookmark"></i>操作人</td>
                    <td ><span th:text="${alist.urg}" class="label label-warning label-mini" th:class="${alist.urg}=='正常'?'label label-success label-mini':(${alist.urg}=='预警'?'label label-warning label-mini':'label label-danger label-mini')">紧急状态</span></td>
                    <td>
                         <button type="button" class="btn btn-primary btn-xs" th:onclick="jumpDetails([[${alist.policyid}]])"><i class="fa fa-pencil"></i></button>
                    </td>
                  </tr>
                </tbody>
              </table>
              <div style="margin-left: 35%">
             	 <ul class="pagination" >
				    <li><a href="javascript:void(0);" th:onclick="goToPage(1);">&laquo;</a></li>
				    <li><a href="javascript:void(0);" th:onclick="|goToPage('${cp-1}');|">&lt;</a></li>
				    <li th:if="${cp-3}>0"><a href="javascript:void(0)" th:onclick="|goToPage('${cp-3}');|">...</a></li>
				    <li th:if="${cp-2}>0"><a href="javascript:void(0)" th:onclick="|goToPage('${cp-2}');|" th:text="${cp-2}"></a>1</li>
				    <li th:if="${cp-1}>0"><a href="javascript:void(0)" th:onclick="|goToPage('${cp-1}');|" th:text="${cp-1}">2</a></li>
				    <li class="active"><a href="javascript:void(0)" th:text="${cp}">3</a></li>
				    <li th:if="${cp+1}<${totalpage}"><a href="javascript:void(0)" th:onclick="|goToPage('${cp+1}');|" th:text="${cp+1}">4</a></li>
				    <li th:if="${cp+2}<${totalpage}"><a href="javascript:void(0)" th:onclick="|goToPage('${cp+2}');|" th:text="${cp+2}">5</a></li>
				    <li th:if="${cp+3}<${totalpage}"><a href="javascript:void(0)" th:onclick="|goToPage('${cp+3}');|" >...</a></li>
				    <li><a href="javascript:void(0);" th:onclick="|goToPage('${cp+1}');|">&gt;</a></li>
				    <li><a href="javascript:void(0);" th:onclick="|goToPage('${totalpage}');|">&raquo;</a></li>
				 </ul>
			   </div>
			   </form>
            </div>
            <!-- /content-panel -->
          </div>
			
        
        </div>
     </section>
	  
    </section>
    <!--main content end-->
    <!--footer start-->
    <!--footer end-->
    
  </section>
  <!-- js placed at the end of the document so the pages load faster -->
  
</body>

</html>
