<!DOCTYPE html>
<!-- saved from url=(0082)https://www.pingan.com/customer/toRegisterUser.do?type=111&flowID=O0MgaX7XqPLHqj5R -->
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<title>会员手机注册 - 平安直通会员中心 - 中国平安</title>
<script type="text/javascript" src="js/jquery-1.8.3.js" ></script>
<meta name="keywords" content="">
<meta name="description" content="">
<meta content="zh-cn" http-equiv="content-language">
<meta http-equiv="x-ua-compatible" content="ie=emulateie7">
<meta content="本页版权归中国平安所有。all rights reserved" name="copyright">
<meta name="WT.channel" content="pingan">
<link rel="stylesheet" type="text/css" href="./pa_ui.css">
<link rel="stylesheet" type="text/css" href="./simple_e_one_regist.css">
<link rel="stylesheet" type="text/css" href="./base(1).css">
<link rel="stylesheet" type="text/css" href="./public(1).css">
<link rel="stylesheet" type="text/css" href="./signUp(2).css">

<style type="text/css">
.check_info {
	height: auto;
}

.register_scont .valid_csselfocus {
	border: 1px solid #888888;
}

.register_scont .valid_csselerror {
	border: 1px solid #E84A04;
}

.tab_ph_register ul {
	width: 340px;
	margin: 0 auto;
}

.register_scont .valid_csselfocus, .newsetbottomboder, .setnewcss_bottom
	{
	border: 0 !important;
	border-bottom: 1px solid #e1e1e1 !important;
}
</style>
<script></script>


<script type="text/javascript">
	function doreg(){
		alert("按下注册");
		var username=$("#username").val();
		var usepwd=$("#userpwd").val;
		location.href="/reg?username="+username+"&userpwd="+userpwd;
	}
</script>


</head>
<body id="simple_b_wrapper"
	onload="getFcmmValidCode(&#39;phoneValidateImg&#39;,&#39;phoneValidCodeId&#39;,&#39;https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do&#39;);">
	<div class="register_sc">
		<div class="v_register">
			<h2>会员注册</h2>
		</div>
		<div class="register_scont" style="padding-top: 5px;"
			id="register1DIV">
			<form id="register_form" method="post">
				<input type="hidden" name="type" value="1"> <input
					type="hidden" name="appId" id="appId" value=""> <input
					type="hidden" name="signature" id="signature" value=""> <input
					type="hidden" name="registerKeyStr"
					value="FCMMREGISTER#EMPTY#TOATOPIC"> <input type="hidden"
					name="loginPwd" id="loginPwd" value=""> <input
					type="hidden" name="loginPwdBank" id="loginPwdBank" value="">
				<input type="hidden" name="timestamp" id="timestamp" value="">
				<input type="hidden" name="validCodeId" id="phoneValidCodeId"
					value="0ff43e92-16d1-4a7f-93cf-52316be58b02"> <input
					type="hidden" name="validTime" id="validTime" value="1"> <input
					type="hidden" name="vcodeVer" id="vcodeVer" value="2.0"> <input
					type="hidden" name="ptag" id="ptag" value="O0MgaX7XqPLHqj5R">
				<input type="hidden" name="regResource" id="regResource" value="">
				<input type="hidden" name="customerType" value="4"> <input
					type="hidden" name="FCMM_CORE_SEND_SHORT_MESSAGE_CODE_ID_KEY_"
					id="sendShortMessageCode" value=""> <input type="hidden"
					id="checkData" name="checkData"> <input type="hidden"
					id="kjSafeKey" name="kjSafeKey" value=""> <input
					type="hidden" id="actionRegisterType" name="actionRegisterType"
					value="">
				<div id="check_info" class="check_info">&nbsp;</div>
				<table width="360">
					<tbody>
						<tr>
							<td colspan="2" valign="top"><div id="phoneSysTip"
									class="fl pl10" style="width: 230px; padding-left: 0px;"></div></td>
						</tr>
						<tr>
							<th valign="top" width="94" class="tar">
								<span class="phone_front_img all_front_img"></span>
							</th>
							<td valign="top" width="230" height="34">
							<input name="username" otitle="手机号码" title="手机号码" value="18720960089" maxlength="11"
								class="input_text  newsetbottomboder pa_ui_element_normal"
								type="text" id="username" value=""
								pa_ui_valid_rules="{required:{error:&#39;请您输入您的手机号码。&#39;},exFunction:{name:&#39;validate_mobile&#39;}}"
								pa_ui_valid_tipbox="phoneNoTip"
								pa_ui_valid_error="您输入的手机号码格式错误，请您重新输入。"
								pa_ui_valid_csselerror="valid_csselerror"
								pa_ui_valid_csselfocus="valid_csselfocus"
								pa_ui_valid_endvalid="endValidCallback" placeholder="手机号码"></td>
						</tr>
						<tr>
							<td colspan="2" valign="top" style="height: 5px;">
							<div id="phoneNoTip" class="fl pl10" style="width: 230px; padding-left: 142px; display: none;">
									<div class="pa_ui_valid_tip" style="display: none;"></div>
								</div></td>
						</tr>
						<tr style="position: relative; z-index: 10">
							<th valign="top" width="94" class="tar">
							<span class="pwd_front_img all_front_img"></span></th>
							<td valign="top" height="34">
								<div id="pwdArea" class="inputline password dib por  setnewcss_bottom">
									<input type="password" style="width: 160px; border: 0;" class="phonePassword pa_ui_element_normal" maxlength="16"
										id="userpwd" name="userpwd"
										title="登录密码" otitle="登录密码" value="hyz123456"
										pa_ui_valid_rules="{required:{error:&#39;请您设置登录密码。&#39;},exFunction:{name:&#39;validate_password_local&#39;}}"
										pa_ui_valid_tipbox="phonePwdTip" pa_ui_keyboard_position="k1"
										pa_ui_valid_csselerror="valid_csselerror"
										pa_ui_valid_endvalid="endValidCallback"
										pa_ui_keyboard_trigger="2" placeholder="登录密码"/>
									<button type="button" class="pa_ui_keyboard_click"></button>
								</div> <br>
								<div style="display: inline; clear: both; postion: absolute;">
									<div class="keybox" id="k1"></div>
								</div>
							</td>
						</tr>
						<tr>
							<td colspan="2" valign="top" style="height: 5px;">
							<div id="phonePwdTip" class="fl pl10" style="width: 279px; padding-left: 142px; display: none;">
								<div class="pa_ui_valid_tip" style="display: none;"></div>
								</div></td>
						</tr>
						<tr style="position: relative; z-index: 9">
							<th valign="top" width="94" class="tar">
							<span class="confirmpwd_front_img all_front_img"></span></th>
							<td valign="top" height="34">
								<div id="pwdArea" class="inputline password dib por valid_csselfocus setnewcss_bottom">
									<input type="password" style="width: 160px; border: 0;"
										maxlength="16" pa_ui_name="validator,keyboard"
										onkeydown="if(event.keyCode == 13){submitForm();}"
										id="phoneConfirmPassword" title="确认密码" otitle="确认密码" value="hyz123456"
										pa_ui_valid_rules="{required:{error:&#39;请再输入一遍登录密码。&#39;},compare:{element:&#39;phonePassword&#39;}}"
										pa_ui_valid_error="密码和确认密码不一致，请您重新输入。"
										pa_ui_valid_tipbox="phoneConPwdTip"
										pa_ui_keyboard_position="k2"
										pa_ui_valid_csselerror="valid_csselerror"
										pa_ui_valid_csselfocus="valid_csselfocus"
										pa_ui_valid_endvalid="endValidCallback"
										pa_ui_keyboard_trigger="2" placeholder="确认密码"
										class="pa_ui_element_normal">
									<button type="button" class="pa_ui_keyboard_click"></button>
								</div> <br>
								<div style="display: inline; clear: both; postion: absolute;">
									<div class="keybox" id="k2"></div>
								</div>
							</td>
						</tr>
						<tr>
							<td colspan="2" valign="top" style="height: 5px;">
							<div id="phoneConPwdTip" class="fl pl10" style="width: 279px; padding-left: 142px; display: none;">
									<div class="pa_ui_valid_tip" style="display: none;"></div>
								</div></td>
						</tr>
						<tr>
							<th valign="top" width="94" class="tar"><span
								class="vcode_front_img all_front_img"></span></th>
							<td valign="top" height="34"><input pa_ui_name="validator"
								style="width: 100px;"
								class="input_text fl mr5 newsetbottomboder pa_ui_element_normal"
								type="text" name="validCode" id="phoneValidCode" otitle="验证码"
								title="验证码" maxlength="4"
								pa_ui_valid_rules="{required:{error:&#39;请您输入验证码。&#39;},exFunction:{name:&#39;validate_checkCode&#39;}}"
								pa_ui_valid_error="您输入的验证码格式错误，请您重新输入。"
								pa_ui_valid_tipbox="phoneValiTip"
								pa_ui_valid_csselerror="valid_csselerror"
								pa_ui_valid_csselfocus="valid_csselfocus"
								pa_ui_valid_endvalid="endValidCallback" placeholder="验证码">
								<img class="verifyImg"
								src="data:image/gif;base64,/9j/4AAQSkZJRgABAgAAAQABAAD/2wBDAAgGBgcGBQgHBwcJCQgKDBQNDAsLDBkSEw8UHRofHh0a%0AHBwgJC4nICIsIxwcKDcpLDAxNDQ0Hyc5PTgyPC4zNDL/2wBDAQkJCQwLDBgNDRgyIRwhMjIyMjIy%0AMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjIyMjL/wAARCAAcADoDASIA%0AAhEBAxEB/8QAHwAAAQUBAQEBAQEAAAAAAAAAAAECAwQFBgcICQoL/8QAtRAAAgEDAwIEAwUFBAQA%0AAAF9AQIDAAQRBRIhMUEGE1FhByJxFDKBkaEII0KxwRVS0fAkM2JyggkKFhcYGRolJicoKSo0NTY3%0AODk6Q0RFRkdISUpTVFVWV1hZWmNkZWZnaGlqc3R1dnd4eXqDhIWGh4iJipKTlJWWl5iZmqKjpKWm%0Ap6ipqrKztLW2t7i5usLDxMXGx8jJytLT1NXW19jZ2uHi4+Tl5ufo6erx8vP09fb3+Pn6/8QAHwEA%0AAwEBAQEBAQEBAQAAAAAAAAECAwQFBgcICQoL/8QAtREAAgECBAQDBAcFBAQAAQJ3AAECAxEEBSEx%0ABhJBUQdhcRMiMoEIFEKRobHBCSMzUvAVYnLRChYkNOEl8RcYGRomJygpKjU2Nzg5OkNERUZHSElK%0AU1RVVldYWVpjZGVmZ2hpanN0dXZ3eHl6goOEhYaHiImKkpOUlZaXmJmaoqOkpaanqKmqsrO0tba3%0AuLm6wsPExcbHyMnK0tPU1dbX2Nna4uPk5ebn6Onq8vP09fb3+Pn6/9oADAMBAAIRAxEAPwD1m+1f%0ATtAvtWvH1C7up5FjLWPm70h2qcbFx8mRknntmuY1zxbba/4fiTUtGLaLfMI5Uldl+ZX3A71IOPlB%0A4HbvWffad/aWh+KdXia4+1nVDDEIGIMighdhHdSHzj/ZFWtYsHu9H8HadaKZ4BKv2lohuWMkqPmI%0A6dW6+hr2KWHoRcVLV311ta0bv/gHoKhR0jJ6vztsrv8AM6ZPiDpS3LW9yQjqMlkkBTHqGbbn8qnv%0AvFugzWT2zajPC1zGUDxIyOgYY3qxGBjOQa4L4tlf7dsII1AC22cKPVj/AICodVtrIfDmzkgila7Z%0A0MszxMAOo2hsY644FXHA4eVOlUu1zu1tyo4CMqcJpv3n6/5FuLU49VmuLm5tr3WrWwHkQW7P/AoG%0AZZGxgsf1Nd54NfTbjRvtWlq8cEzZMLNnyyOoFcboCaxoum3+hWmkTS3czsouCMRqDxuJrsvDnhyb%0AQfC76dDdCO7kVj54QMEkIwGAPXBxx3xUZg6ag4xezVknurb22QYr2ajyxdtUlr0tvb+mXRf6hLqO%0AqWK2cEBhiV7KaS4DC4JU5JRfmRVbAPr2rRt/P+zRfafL+0bB5vl527sc4zzjPTNU9Jt7yOxt31X7%0ANLqax+XLPAvDDPHOAeeCRgDOcCoP+Eq8O/8AQf0v/wADI/8AGvJSlN3jH7r/APB3/wCG0OBRk1yp%0AXH2unxaFYmHTbN5jJM0jAuBlm5LMT24A4z24qvHpWpGWIxXVtplsufMt7KBWL56fOw4wfRe5rcop%0AOTe441HF3sr92r/noczqHgzRNcVjM88kynY863BZ8jsc5A+mKvr4a0z+y7PTpYPOtrQgxpIcgkdy%0AO9XLfTLS0vrq9gi2XF1t85txIbbnGATgfePQDJJJq3TVWpyqLew51Zuy5m0gorJ0K9uLz+0/tEm/%0Ayb+WGPgDCDGBx9aj8P3Fxq/haGW6nfzp1kVpUwrD5mAIwMAgYrOc1GXL5N/db/Myl7tVUnu/+B/m%0AbVcPcnw7bXU0H/CA3MvluU8yLR42RsHGVPcHsa7WGPyYI4t7vsULvc5ZsDqT3NPpqU7Xg7GkZODa%0AP//Z"
								id="phoneValidateImg" title="" align="absmiddle" width="60"
								height="30"><a id="changeImg" href="javascript:;"
								class="t_s_t_sano_2e84ca" title="换一张">换一张</a></td>
						</tr>
						<tr>
							<td colspan="2" valign="top" style="height: 22px;"><div
									id="phoneValiTip" class="fl pl10"
									style="width: 279px; padding-left: 142px; display: none;">
									<div class="pa_ui_valid_tip" style="display: none;"></div>
								</div></td>
						</tr>
						<tr>
							<th valign="top" width="94" class="tar"><span
								class="phonecode_front_img all_front_img"></span></th>
							<td valign="top" height="30"><input
								class="input_text fl mr10 newsetbottomboder pa_ui_element_normal"
								style="width: 90px;" type="text" name="activeNo" otitle="手机动态码"
								title="手机动态码" maxlength="6" pa_ui_name="validator" id="activeNo"
								value=""
								pa_ui_valid_rules="{required:{error:&#39;请您输入发送到您手机上的手机动态码。&#39;},exFunction:{name:&#39;validate_activeNo&#39;}}"
								pa_ui_valid_tipbox="tmpphoneActiveTip"
								pa_ui_valid_error="您输入的手机动态码格式错误，请您重新输入。"
								pa_ui_valid_csselerror="valid_csselerror"
								pa_ui_valid_csselfocus="valid_csselfocus"
								pa_ui_valid_endvalid="endValidCallback" placeholder="动态码">
								<span> <a href="javascript:sendActiveNo();"
									id="get_mobile_code_btn" class="dib sendverify"
									style="text-decoration: none;">短信动态码</a>
							</span></td>
						</tr>
						<tr>
							<td colspan="2" valign="top" style="height: 14px;"><div
									id="phoneRemTip" class="fl pl10"
									style="width: 295px; padding-left: 130px; display: none;"></div></td>
						</tr>
						<tr>
							<th></th>
							<td style="position: relative; overflow: hidden;">
							<i id="get_k_frames" class="get_k_frames"></i> 
							
								<button type="button" th:onclick="doreg();" style="margin-top: 5px;" class="btn_submit mt30" title="立即注册" otitle="立即注册" >立即注册</button>
								
							</td>
							<td></td>
						</tr>
						<tr>
							<td colspan="2" valign="top" style="height: 5px;"><div
									id="activeTip" class="pl10"></div>
								<div id="tmpphoneActiveTip" style="display: none;">
									<div class="pa_ui_valid_tip" style="display: none;"></div>
								</div></td>
						</tr>
						<tr>
							<th valign="top"></th>
							<td>
								<div class="f_c_999">
									<input type="checkbox" id="phoneRemember" class="vam mr5"
										onclick="phoneCheck();" checked="checked"> <label
										for="remember" hidefocus="hidefocus">我已看过并同意<a
										href="https://www.pingan.com.cn/pinganone/pa/register_logon/terms.jsp"
										class="ano_2e84ca_xy_f" title="《平安一账通服务协议》"
										otitle="《平安一账通服务协议》" otype="button" target="_blank">《平安一账通服务协议》</a></label>
								</div>
							</td>
						</tr>
					</tbody>
				</table>
			</form>
		</div>

		<input type="hidden" id="ecus" name="ecus"
			value="151e7c44e95a26824aced26422bf25d622293e2d">
	</div>
	
	<script type="text/javascript">
	function IEVersion() {
        var userAgent = navigator.userAgent; //取得浏览器的userAgent字符串
        var isIE = userAgent.indexOf("compatible") > -1 && userAgent.indexOf("MSIE") > -1; //判断是否IE<11浏览器
        var isEdge = userAgent.indexOf("Edge") > -1 && !isIE; //判断是否IE的Edge浏览器
        var isIE11 = userAgent.indexOf('Trident') > -1 && userAgent.indexOf("rv:11.0") > -1;
        if(isIE) {
            var reIE = new RegExp("MSIE (\\d+\\.\\d+);");
            reIE.test(userAgent);
            var fIEVersion = parseFloat(RegExp["$1"]);
            if(fIEVersion == 7) {
                return 7;
            } else if(fIEVersion == 8) {
                return 8;
            } else if(fIEVersion == 9) {
                return 9;
            } else if(fIEVersion == 10) {
                return 10;
            } else {
                return 6;//IE版本<=7
            }
        } else if(isEdge) {
            return 'edge';//edge
        } else if(isIE11) {
            return 11; //IE11
        }else{
            return -1;//不是ie浏览器
        }
    }
	if(IEVersion()>9 || IEVersion()==-1){
		$("#get_k_frames").show();
	}else{
		$("#get_k_frames").hide();
	}
		var isMsIe6 = false;
		// 针对IE6 不支持验证码显示的解决方案，显示用户提示
		if ($.browser.msie && $.browser.version == '6.0') {
			isMsIe6 = true;
			showErrorInfo("手机注册暂不支持IE6浏览器，请升级到IE8及以上版本", "check_info");
		}
		//1-24版本是灰度用户调用会员接口，主账户介入将会员和一张通的链接斩断。
		function getGrayUser(data, callback) {//判断是否是灰度用户
			$.ajax({
				type : "GET",
				dataType : 'json',
				data : {
					userinfo : data
				},
				url : "/customer/toLoginCheckIsGray.do",
				success : function(res) {
					callback(res);
				}
			});
		};

		var tempPhoneNum = '';//缓存手机号
		$(function() {
			// 密码框focus , blur事件
			$('#phonePassword,#phoneConfirmPassword').bind(
					'focus',
					function() {
						$(this).removeClass('valid_csselfocus').removeClass(
								'valid_csselerror');
						$(this).parent().removeClass('valid_csselerror')
								.addClass('valid_csselfocus');
					}).bind(
					'blur',
					function() {
						$(this).removeClass('valid_csselfocus').removeClass(
								'valid_csselerror');
						$(this).parent().removeClass('valid_csselerror')
								.removeClass('valid_csselfocus');
					});

			// 填充手机号
			var mobileNo = GetRequest("mobile");
			mobileNo && $("#mobileNo").val(mobileNo);

			if (mobileNo) {//验证从链接中取到的电话号码
				if (/^[1][3465789][0-9]{9}$/.test($("#mobileNo").val())) {
					tempPhoneNum = $("#mobileNo").val();
					getGrayUser(
							mobileNo,
							function(res) {
								if (res.isGray == 'Y') {//灰度用户
									getFcmmValidCode('phoneValidateImg',
											'phoneValidCodeId',
											'/customer/do/urlVCode.do');
								} else {
									getFcmmValidCode(
											'phoneValidateImg',
											'phoneValidCodeId',
											'https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do');
								}
							});
				} else {//验证不通过
					showErrorInfo("请正确输入您的手机号码", "check_info");
				}
			}

			// 直通会员安全问题
			inityjmdnffkds("register1DIV", "pc");

			$.getJSON('/customer/getEvercookie.do', function(res) {
				if (res.resultCode == 'Y') {
					$('#ecus').val(res.evercookie);
				}
			});

			$("#changeImg")
					.bind(
							'click',
							function() {//换一张图形验证码
								if (/^[1][3465789][0-9]{9}$/
										.test($("#mobileNo").val())) {
									getGrayUser(
											$("#mobileNo").val(),
											function(res) {
												if (res.isGray == 'Y') {//灰度用户
													getFcmmValidCode(
															'phoneValidateImg',
															'phoneValidCodeId',
															'/customer/do/urlVCode.do');
												} else {
													getFcmmValidCode(
															'phoneValidateImg',
															'phoneValidCodeId',
															'https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do');
												}
											});

								} else {
									getFcmmValidCode(
											'phoneValidateImg',
											'phoneValidCodeId',
											'https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do');
								}

							});
			//手机号输入后获取对应图形验证码
			$("#mobileNo")
					.bind(
							'keyup',
							function() {
								if ($("#mobileNo").val().length == 11) {
									if ($("#mobileNo").val() == tempPhoneNum) {
										return;
									} else {
										tempPhoneNum = $("#mobileNo").val();
									}
									if (/^[1][3465789][0-9]{9}$/.test($(
											"#mobileNo").val())) {
										getGrayUser(
												$("#mobileNo").val(),
												function(res) {
													if (res.isGray == 'Y') {//灰度用户
														getFcmmValidCode(
																'phoneValidateImg',
																'phoneValidCodeId',
																'/customer/do/urlVCode.do');
													} else {
														getFcmmValidCode(
																'phoneValidateImg',
																'phoneValidCodeId',
																'https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do');
													}
												});
									}
								}
							});
			//手机号输入后失去焦点时是否更改图形验证码
			$("#mobileNo")
					.bind(
							'blur',
							function() {
								if ($("#mobileNo").val().length == 11) {
									if ($("#mobileNo").val() == tempPhoneNum) {
										return;
									} else {
										tempPhoneNum = $("#mobileNo").val();
									}
									if (/^[1][3465789][0-9]{9}$/.test($(
											"#mobileNo").val())) {
										getGrayUser(
												$("#mobileNo").val(),
												function(res) {
													if (res.isGray == 'Y') {//灰度用户
														getFcmmValidCode(
																'phoneValidateImg',
																'phoneValidCodeId',
																'/customer/do/urlVCode.do');
													} else {
														getFcmmValidCode(
																'phoneValidateImg',
																'phoneValidCodeId',
																'https://test-member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do');
													}
												});
									}
								}
							});
			//

		});

		// 直通会员安全问题
		function mobileNocheckData() {
			document.getElementById("checkData").value = yjmdnffkdsout();
		}

		//获取url参数
		function GetRequest(param_name) {
			var url = location.search; //获取url中"?"符后的字串
			var theRequest = '';
			if (url == '') {
				return '';
			}
			if (url.indexOf("?") != -1) {
				var str = url.substr(1);
				strs = str.split("&");
				for (var i = 0; i < strs.length; i++) {
					if (strs[i].split("=")[0] == param_name) {
						theRequest = strs[i].split("=")[1];
					}
				}
			}
			return theRequest;
		}
		// 重写showErrorInfo方法，在执行显示操作之前，将上面的提示信息清空
		function showErrorInfo(str, id) {
			// 清空上面的提示信息
			$('#check_info').empty().html('&nbsp;');
			var _div = "<div class='pa_ui_valid_tip pa_ui_validator_onerror'>"
					+ str + "</div>";
			// 如果为手机验证码则修改显示样式
			if (id == 'activeTip') {
				_div = "<div style='color:#666; text-align:center;line-height:25px;'>"
						+ str + "</div>";
			}
			$('#' + id).html(_div).show();
		}
		// 更新错误信息
		function updateErrorInfo() {
			var validElList = $('table .pa_ui_validator_onerror:not("#activeTip .pa_ui_validator_onerror")');
			if (validElList.length > 0) {
				$('#check_info').html(validElList.eq(0).parent().html());
				$('#activeTip').empty();
			} else {
				$('#check_info').empty().html('&nbsp;');
			}
		}
		function endValidCallback(elem, result) {
			// 处理密码框出错样式
			if (elem.id == 'phonePassword' || elem.id == 'phoneConfirmPassword') {
				if (!result) {
					$(elem).parent().removeClass('valid_csselfocus').addClass(
							'valid_csselerror');
				} else {
					$(elem).parent().removeClass('valid_csselfocus')
							.removeClass('valid_csselerror');
				}
			}

			if (!result) {
				$(elem).validator('showMessage')
			}
			// 更新错误信息
			updateErrorInfo();
			// 手机号检测是否已注册
			/*if(result && elem.id == 'mobileNo'){
				$.getJSON('https://member.pingan.com.cn/pinganone/pa/validateMobileNoForFcmm.view?checkMobileLogin=1&mobileNo='+$(elem).val()+'&callback=?',function(res){
					// 如果手机号已被注册，则提示用户
					if(res.status == 'success' && res.data.errorCode == '0'){
						showErrorInfo(res.data.errorMessage, "check_info");
					}
				});
			}*/
			return result;
		}
		//提交按钮
		function submitForm() {
			var grayUser = false;
			var isValid = $('#register_form').validator({
				triggerOnSubmit : false
			}).validator('check');
			// 更新错误信息
			updateErrorInfo();
			if (isValid) {
				//检查同意条款框有没有打勾
				var remember = $("#phoneRemember");
				if (!remember.attr("checked")) {
					showErrorInfo("请看过并同意服务条款并在前面的选择框打勾。", "check_info");
					return;
				}
				var url = 'https://member.pingan.com.cn/pinganone/pa/checkValidCode.do?validCode='
						+ $("#phoneValidCode").val()
						+ '&validCodeId='
						+ $("#phoneValidCodeId").val() + '&callback=?';
				var urlT = 'https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do';
				getGrayUser(
						$("#mobileNo").val(),
						function(res) {
							if (res.isGray == 'Y') {
								grayUser = true;
								url = '/customer/do/checkValidCode.do?validCode='
										+ $("#phoneValidCode").val()
										+ '&validCodeId='
										+ $("#phoneValidCodeId").val()
										+ '&callback=?';//2-6
								urlT = '/customer/do/urlVCode.do';//2-5
							}
							//验证图片验证码
							$
									.getJSON(
											url,
											function(data) {
												if (data.status == 'fail'
														&& !isMsIe6) {
													showErrorInfo(data.msg,
															"check_info");
													getFcmmValidCode(
															'phoneValidateImg',
															'phoneValidCodeId',
															urlT);
													return;
												}
												//验证手机动态码
												var urlss = 'https://member.pingan.com.cn/pinganone/pa/validateShortMessageForOut.do?mobileNo='
														+ $("#mobileNo").val()
														+ '&activeNo='
														+ $("#activeNo").val()
														+ '&validTime='
														+ $("#validTime").val()
														+ '&callBack=?';
												if (grayUser) {
													urlss = '/customer/do/regValidateShortMessage.do?mobileNo='
															+ $("#mobileNo")
																	.val()
															+ '&activeNo='
															+ $("#activeNo")
																	.val()
															+ '&validTime='
															+ $("#validTime")
																	.val()
															+ '&callback=?';//2-8
													regValidateShortMessage(
															urlss, grayUser);

												} else {
													regValidateShortMessage(
															urlss, grayUser);
												}

											});
						});

			}
			return false;
		}
		function regValidateShortMessage(urlss, type) {
			if (urlss) {
				$
						.ajax({
							type : "GET",
							contentType : "application/x-www-form-urlencoded;charset=UTF-8",
							url : urlss,
							dataType : 'jsonp',
							success : function(data) {
								if (data.status == 'fail') {
									showErrorInfo(data.data.errorMessage,
											"check_info");
									return;
								}
								//密码加密
								var PublicKey = 'BDAD3EB2F9681EAF6FBE41A073531AE4619DB772AB44451C2D46140F746B3B20271D46DAF6F00D699582E9D41BADE4A14C80AEE4A5DEA85B0255369E9E107B6B4F74A18CCDB4EFD490773C3B752C5555F463CB378B89F42AF51D8AE48F9CE607ACC47229CCC62C4F7606DED2B087CBAF0A1626B01EF08D3C2B05092C71BB6C75';
								var pwd = $("#phonePassword").val();
								var RSA = new RSAKey();
								RSA.setPublic(PublicKey, "10001");
								var Res = RSA.encrypt(pwd);
								$("#loginPwd").val(Res);
								PublicKey = 'B92CC7D38872CFE8B0EAABBCA86D0315DC803B3E70FA99CC8FA5035002527FC18118E4003B9B12E29864F3BBBA98DF6F42D4DEC7FB2757E36CDABC39A55FCBF3B3AAFB2503EBF33762F3D86AF8839179D5543FDF7816FC3538FAAAFE5A75A281A112734BF4D89271299EF63850D2099654DC4C45069964A951F76389A93AB0CF352D2B360E2ADB9FC291E0B625C2B2D0DE008DE5DA3BAB852A67642A2D0C9530E512D46D335C3E48876AFCB77A06E151D284964F6755C94EF1EE3CDB97D6421BF5C04718F17BFCCA81769D6FBFDC9A037CECCAF2CD008038DA4255346A9FE6607D197ADC8649C85B00F51F0A960E343E67215975A8167ACB235EEF1567D46789';
								pwd = $("#phonePassword").val();
								RSA = new RSAKey();
								RSA.setPublic(PublicKey, "10001");
								//Res = RSA.encrypt(pwd);
								Res = RSA.encryptPama(pwd);
								$("#loginPwdBank").val(Res);
								$("#phonePassword").val('');
								$("#phoneConfirmPassword").val('');

								try {
									//防攻击1
									//var registerData = Security.registerValue('PA18RUM',$("#mobileNo").val(),'',returnCitySN["cip"]);
									$('#kjSafeKey').val(
											Security.getDeviceAllInfo());
								} catch (err) {

								} finally {
									//发送签名串给后台
									$
											.ajax({
												type : "GET",
												async : false,
												cache : false,
												url : "./param-sign.ajax",
												data : {},
												success : function(data) {
													var signData = eval("("
															+ data + ")");
													$('#signature').val(
															signData.sign);
													//获取后台返回的时间戳
													$('#timestamp').val(
															signData.timestamp);
													$('#appId').val(
															signData.appID);
													$('#regResource').val(
															signData.appID);
													//19.3.13区分注册来源
													var outerHref = parent.location.ancestorOrigins[0]||'www.4008000000.com';
													var domainsys = outerHref.indexOf('baoxian.pingan.com')>-1?'baoxian_reg':'4008_reg';
													
													//var domainsys = outerHref.indexOf('baoxian-dmzstg1.pa18.com')>-1?'baoxian_reg':'4008_reg';
													$('#actionRegisterType').val(domainsys);
													
													encryptFnForUsage(function() {
														//提交表单
														mobileNocheckData();
														$("#register_form")
																.attr("method",
																		"post");
														//$("#register_form").attr("action", "https://member.pingan.com.cn/pinganone/pa/publicRegister.do");
														if (type) {
															//灰度的
															$("#register_form")
																	.attr(
																			"action",
																			"/customer/do/commPublicRegister.do");//2-9
														} else {
															$("#register_form")
																	.attr(
																			"action",
																			"https://member.pingan.com.cn/pinganone/pa/publicRegister.do");
														}

														$("#register_form")
																.submit();
													});
												}
											});
								}

							}
						});
			}

		};
		//发送手机动态码
		function sendActiveNo() {
			if ('' == $("#mobileNo").val()) {
				showErrorInfo('请输入您的手机号码再点击发送。', "check_info");
				return;
			} else if ('' == $("#phoneValidCode").val()) {
				showErrorInfo('请输入验证码再点击发送。', "check_info");
			} else {
				url_one = 'https://member.pingan.com.cn/pinganone/pa/sendShortMessageForOut.do?mobileNo='
						+ $("#mobileNo").val()
						+ '&needVcode=1'
						+ '&validCode='
						+ $("#phoneValidCode").val()
						+ '&validCodeId='
						+ $("#phoneValidCodeId").val()
						+ '&vcodeVer='
						+ $("#vcodeVer").val()
						+ '&validTime='
						+ $("#validTime").val() + '&callBack=?';

				url_two = 'https://member.pingan.com.cn/pinganone/pa/paic/common/urlvcode.do';

				getGrayUser(
						$("#mobileNo").val(),
						function(res) {
							if (res.isGray == 'Y') {
								url_one = '/customer/do/regSendShortMessage.do?mobileNo='
										+ $("#mobileNo").val()
										+ '&needVcode=1'
										+ '&validCode='
										+ $("#phoneValidCode").val()
										+ '&validCodeId='
										+ $("#phoneValidCodeId").val()
										+ '&vcodeVer='
										+ $("#vcodeVer").val()
										+ '&validTime='
										+ $("#validTime").val()
										+ '&callback=?';//2-7
								url_two = '/customer/do/urlVCode.do';
							}
							$.getJSON(url_one, function(data) {
								if (data.status == 'fail') {
									showErrorInfo(data.data.errorMessage,
											"check_info");
									getFcmmValidCode('phoneValidateImg',
											'phoneValidCodeId', url_two)
									var validTime = Number($("#validTime")
											.val());
									$("#validTime").val(1 + validTime);
								} else {
									$("#sendShortMessageCode").val(
											data.sendShortMessageCode);
									timedown('init');
								}
							});
						});

			}
		}

		//手机动态码按钮倒数计时
		var _time = 60, tipSpeedTime = 120, tipTimer = null;
		function timedown(arg1) {
			if (arg1 == 'init') {
				clearInterval(tipTimer);
				showErrorInfo("手机动态码已发送到手机" + $("#mobileNo").val() + "，请于"
						+ tipSpeedTime + "秒内输入", "activeTip");
				tipTimer = setTimeout(function() {
					showErrorInfo("手机动态码已过期，请点击重新发送获取。", "activeTip");
				}, 119000);
			}

			$("#get_mobile_code_btn").attr("style", "text-decoration:none;");
			$("#get_mobile_code_btn")
					.attr("href", "javascript:sendActiveNo();");
			var t = $("#get_mobile_code_btn");
			if (_time == 0) {
				t.text("重新发送动态码");
				_time = 60;
			} else {
				$("#get_mobile_code_btn")
						.attr("style",
								"text-decoration:none;background:#fbb03b;cursor:default;");
				$("#get_mobile_code_btn").attr("href", "#");
				t.text("" + _time + "秒后再次获取");
				_time--;
				setTimeout(function() {
					timedown(t)
				}, 1000);
			}
		}
		//同意条款打勾之后消除提示
		function phoneCheck() {
			var phoneRemember = $("#phoneRemember");
			if (phoneRemember.attr("checked")) {
				$("#phoneRemTip").text("");
			}
			// 更新错误信息
			updateErrorInfo();
		}
	</script>


	<div id="userdata_el"
		evercookiefingerprint="3bf578be54b57de34909cb676a10fb4a2ed68128"
		style="visibility: hidden; position: absolute;"></div>
</body>
</html>